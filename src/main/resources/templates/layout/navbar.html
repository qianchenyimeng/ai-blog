<!DOCTYPE html>
<html lang="zh-CN" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<!-- 导航栏片段 -->
<div th:fragment="navbar"
    style="background-color: #007bff; color: white; height: 56px; position: sticky; top: 0; z-index: 1000; width: 100%; display: flex; align-items: center; justify-content: space-between; padding: 0 8px; box-sizing: border-box;">
    <!-- 左侧品牌 -->
    <a th:href="@{/}" style="color: white; text-decoration: none; font-weight: bold; font-size: 16px; flex-shrink: 0;">
        <i class="fas fa-blog" style="margin-right: 4px;"></i>博客
    </a>

    <!-- 右侧菜单按钮 -->
    <div style="position: relative;">
        <a href="#" data-bs-toggle="dropdown" title="菜单"
            style="color: rgba(255,255,255,0.9); text-decoration: none; padding: 8px; border-radius: 3px; transition: background-color 0.2s;">
            <i class="fas fa-bars" style="font-size: 16px;"></i>
        </a>
        <ul class="dropdown-menu dropdown-menu-end" style="min-width: 180px;">
            <!-- 通用菜单项 -->
            <li><a class="dropdown-item" th:href="@{/}" style="padding: 8px 16px; font-size: 14px;"><i
                        class="fas fa-home me-2"></i>首页</a></li>
            <li><a class="dropdown-item" th:href="@{/search}" style="padding: 8px 16px; font-size: 14px;"><i
                        class="fas fa-search me-2"></i>搜索</a></li>
            <li><a class="dropdown-item" th:href="@{/tags}" style="padding: 8px 16px; font-size: 14px;"><i
                        class="fas fa-tags me-2"></i>标签</a></li>

            <!-- 已登录用户菜单 -->
            <div sec:authorize="isAuthenticated()">
                <li>
                    <hr class="dropdown-divider" style="margin: 4px 0;">
                </li>
                <li><a class="dropdown-item" th:href="@{/blog/create}" style="padding: 8px 16px; font-size: 14px;"><i
                            class="fas fa-plus me-2"></i>创建博客</a></li>
                <li><a class="dropdown-item" th:href="@{/my-blogs}" style="padding: 8px 16px; font-size: 14px;"><i
                            class="fas fa-blog me-2"></i>我的博客</a></li>
                <li><a class="dropdown-item" th:href="@{/my-comments}" style="padding: 8px 16px; font-size: 14px;"><i
                            class="fas fa-comments me-2"></i>我的评论</a></li>
                <li><a class="dropdown-item" th:href="@{/profile}" style="padding: 8px 16px; font-size: 14px;"><i
                            class="fas fa-user-edit me-2"></i>个人资料</a></li>
                <li>
                    <hr class="dropdown-divider" style="margin: 4px 0;">
                </li>
                <li><a class="dropdown-item" th:href="@{/logout}" style="padding: 8px 16px; font-size: 14px;"><i
                            class="fas fa-sign-out-alt me-2"></i>退出登录</a></li>
            </div>

            <!-- 未登录用户菜单 -->
            <div sec:authorize="!isAuthenticated()">
                <li>
                    <hr class="dropdown-divider" style="margin: 4px 0;">
                </li>
                <li><a class="dropdown-item" th:href="@{/login}" style="padding: 8px 16px; font-size: 14px;"><i
                            class="fas fa-sign-in-alt me-2"></i>登录</a></li>
                <li><a class="dropdown-item" th:href="@{/register}" style="padding: 8px 16px; font-size: 14px;"><i
                            class="fas fa-user-plus me-2"></i>注册</a></li>
            </div>
        </ul>
    </div>
</div>

</html>