# 实施计划

- [x] 1. 项目初始化和基础配置



  - 创建Spring Boot项目结构，配置Maven依赖（Spring Boot Starter Web, JPA, Security, Thymeleaf, MySQL）
  - 配置application.yml文件，包括数据库连接、JPA和Thymeleaf设置
  - 创建主应用类BlogApplication.java
  - _需求: 7.3, 7.4_



- [ ] 2. 数据库层实现
- [x] 2.1 创建实体类和数据模型



  - 实现User实体类，包含用户基本信息和关联关系
  - 实现Blog实体类，包含博客内容和作者关联



  - 实现Comment实体类，包含评论内容和用户、博客关联
  - 实现Tag实体类和博客标签多对多关系
  - _需求: 1.2, 3.2, 6.4_

- [x] 2.2 创建Repository接口


  - 实现UserRepository接口，包含用户查询方法
  - 实现BlogRepository接口，包含博客CRUD和搜索方法
  - 实现CommentRepository接口，包含评论查询和删除方法
  - 实现TagRepository接口，包含标签管理方法
  - _需求: 1.2, 3.2, 6.4_




- [ ] 3. 安全配置和用户认证
- [ ] 3.1 配置Spring Security
  - 创建SecurityConfig类，配置HTTP安全规则和认证方式



  - 配置密码编码器（BCryptPasswordEncoder）
  - 设置登录页面和成功跳转规则
  - 配置静态资源访问权限
  - _需求: 1.4, 1.5, 6.1_




- [ ] 3.2 实现用户认证服务
  - 创建UserDetailsService实现类，处理用户认证逻辑
  - 实现用户密码验证和会话管理
  - 创建认证失败处理器


  - _需求: 1.4, 1.5_

- [ ] 4. 用户管理功能实现
- [ ] 4.1 实现用户注册功能
  - 创建UserService类，实现用户注册业务逻辑
  - 创建UserController，处理注册页面显示和表单提交
  - 创建注册页面模板（register.html）



  - 实现用户名和邮箱唯一性验证
  - 编写用户注册的单元测试
  - _需求: 1.1, 1.2, 1.3_

- [x] 4.2 实现用户登录功能



  - 创建登录页面模板（login.html）
  - 配置Spring Security表单登录
  - 实现登录失败错误提示
  - 编写用户登录的集成测试
  - _需求: 1.4, 1.5, 1.6_



- [ ] 4.3 实现用户资料管理
  - 在UserService中添加用户信息更新方法
  - 在UserController中添加资料页面和更新处理
  - 创建用户资料页面模板（profile.html）
  - 实现密码修改功能，包含当前密码验证
  - 编写用户资料管理的单元测试
  - _需求: 2.1, 2.2, 2.3, 2.4, 2.5_



- [ ] 5. 博客管理功能实现
- [ ] 5.1 实现博客创建功能
  - 创建BlogService类，实现博客创建业务逻辑
  - 创建BlogController，处理博客创建页面和表单提交
  - 创建博客创建页面模板（create-blog.html）
  - 实现博客内容验证和作者关联


  - 编写博客创建的单元测试
  - _需求: 3.1, 3.2_

- [ ] 5.2 实现博客列表和详情页面
  - 在BlogService中实现博客列表查询和分页
  - 在BlogController中添加首页和博客详情页面处理
  - 创建博客首页模板（index.html）



  - 创建博客详情页面模板（blog-detail.html）
  - 实现博客按时间倒序排列
  - 编写博客查询的单元测试
  - _需求: 4.1, 4.2, 4.3_



- [ ] 5.3 实现博客编辑和删除功能
  - 在BlogService中添加博客更新和删除方法
  - 在BlogController中添加编辑页面和删除处理
  - 创建博客编辑页面模板（edit-blog.html）
  - 实现博客作者权限验证
  - 添加删除确认对话框

  - 编写博客编辑删除的单元测试
  - _需求: 3.3, 3.4, 3.5, 3.6, 3.7_

- [ ] 5.4 实现我的博客管理页面
  - 在BlogService中添加按作者查询博客的方法
  - 在BlogController中添加我的博客管理页面处理
  - 创建我的博客管理页面模板（my-blogs.html）
  - 显示每篇博客的基本信息和操作按钮



  - 编写博客管理页面的集成测试
  - _需求: 3.3_

- [ ] 6. 搜索功能实现
- [ ] 6.1 实现博客搜索功能
  - 在BlogRepository中添加关键词搜索方法
  - 在BlogService中实现搜索业务逻辑


  - 在BlogController中添加搜索处理
  - 在首页添加搜索表单
  - 创建搜索结果页面模板
  - 编写搜索功能的单元测试
  - _需求: 4.4_





- [ ] 6.2 实现标签筛选功能
  - 在BlogRepository中添加按标签查询方法
  - 在BlogService中实现标签筛选逻辑
  - 在页面中添加标签显示和筛选链接
  - 编写标签筛选的单元测试
  - _需求: 4.5_

- [ ] 7. 评论功能实现
- [ ] 7.1 实现评论显示功能
  - 创建CommentService类，实现评论查询业务逻辑
  - 在博客详情页面添加评论列表显示
  - 实现评论按时间顺序排列
  - 显示评论者信息和评论时间
  - 编写评论查询的单元测试
  - _需求: 6.1, 6.6_

- [ ] 7.2 实现评论发表功能
  - 在CommentService中添加评论创建方法
  - 创建CommentController，处理评论提交



  - 在博客详情页面添加评论表单（仅登录用户可见）
  - 实现评论内容验证和用户关联
  - 实现评论提交后页面刷新
  - 编写评论发表的单元测试
  - _需求: 6.2, 6.3, 6.4, 6.5_




- [ ] 7.3 实现评论管理功能
  - 在CommentService中添加评论删除方法
  - 在我的博客管理页面显示评论数量
  - 创建评论管理页面，显示博客的所有评论
  - 实现博客作者删除评论功能
  - 添加删除评论确认对话框
  - 编写评论管理的单元测试
  - _需求: 5.1, 5.2, 5.3, 5.4, 5.5_

- [ ] 8. 前端页面优化和样式
- [ ] 8.1 创建页面布局和导航
  - 创建基础布局模板（layout.html）
  - 实现响应式导航栏，包含登录状态显示
  - 添加Bootstrap CSS框架
  - 创建页面头部和底部组件
  - _需求: 7.1, 7.2_

- [ ] 8.2 优化页面样式和用户体验
  - 美化所有页面的CSS样式
  - 添加表单验证的前端JavaScript
  - 实现页面加载动画和交互效果
  - 优化移动端显示效果
  - 添加错误提示和成功消息显示
  - _需求: 7.1, 7.2_

- [ ] 9. 异常处理和错误页面
- [ ] 9.1 实现全局异常处理
  - 创建GlobalExceptionHandler类
  - 实现各种业务异常的处理方法
  - 创建统一的错误响应格式
  - 编写异常处理的单元测试
  - _需求: 1.3, 1.6, 3.6, 6.3_

- [ ] 9.2 创建错误页面
  - 创建404错误页面模板
  - 创建500错误页面模板
  - 创建403权限错误页面模板
  - 配置Spring Boot错误页面映射
  - _需求: 1.6, 3.6_

- [ ] 10. 数据验证和安全加固
- [ ] 10.1 实现输入数据验证
  - 在实体类中添加Bean Validation注解
  - 创建自定义验证器处理业务规则
  - 在Controller中添加@Valid注解
  - 实现前端表单验证JavaScript
  - 编写数据验证的单元测试
  - _需求: 1.2, 1.3, 3.2, 6.3_

- [ ] 10.2 加强安全防护
  - 实现XSS防护，确保用户输入安全转义
  - 配置CSRF保护
  - 实现SQL注入防护验证
  - 添加内容安全策略配置
  - 编写安全防护的集成测试
  - _需求: 1.2, 3.2, 6.4_

- [ ] 11. 测试完善和集成测试
- [x] 11.1 完善单元测试覆盖



  - 为所有Service类编写完整的单元测试
  - 为所有Repository类编写数据访问测试
  - 为工具类和验证器编写测试
  - 确保测试覆盖率达到80%以上
  - _需求: 1.1-1.6, 2.1-2.5, 3.1-3.7_




- [ ] 11.2 编写集成测试
  - 为所有Controller编写Web层集成测试
  - 编写数据库集成测试，使用TestContainers
  - 编写Spring Security配置测试



  - 编写完整的用户流程端到端测试
  - _需求: 1.1-1.6, 2.1-2.5, 3.1-3.7, 4.1-4.5, 5.1-5.5, 6.1-6.6_

- [x] 12. 应用配置和部署准备




- [ ] 12.1 完善应用配置
  - 配置生产环境的application-prod.yml
  - 配置日志输出和级别设置
  - 配置数据库连接池参数
  - 添加健康检查端点配置
  - _需求: 7.3, 7.4, 7.5_

- [ ] 12.2 创建部署脚本和文档
  - 创建数据库初始化SQL脚本
  - 编写应用启动脚本
  - 创建README.md文档，包含安装和运行说明
  - 创建API文档
  - _需求: 7.3, 7.4, 7.5_